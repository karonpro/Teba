{% extends 'base.html' %}
{% load custom_filters %}
{% block content %}
<div class="card p-3">
  <h2>Customer Report</h2>

  <!-- Filter -->
  <form method="get" class="row g-2 mb-3">
    <div class="col-auto"><input type="date" name="start" value="{{ request.GET.start }}" class="form-control"></div>
    <div class="col-auto"><input type="date" name="end" value="{{ request.GET.end }}" class="form-control"></div>
    <div class="col-auto"><button type="submit" class="btn btn-secondary">Filter</button></div>
  </form>

  <!-- Table -->
  <table class="table table-striped table-dark">
    <thead>
      <tr><th>Name</th><th>Balance</th><th>Supply</th></tr>
    </thead>
    <tbody>
      {% for c in customers %}
      <tr>
        <td>{{ c.name }}</td>
        <td>{{ c.balance|floatformat:2 }}</td>
        <td>{{ c.supply|floatformat:2 }}</td>
      </tr>
      {% empty %}
      <tr><td colspan="3">No customers</td></tr>
      {% endfor %}
    </tbody>
  </table>

  <!-- Totals -->
  <div class="mt-3">
    <strong>Total Paid:</strong> {{ totals.total_paid|default:0|floatformat:2 }}
  </div>
</div>
{% endblock %}